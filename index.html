<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Join Telegram</title>
<style>
  body{font-family:system-ui, -apple-system; background:#0b0b0d; color:#fff; margin:0; min-height:100vh;
       display:flex; align-items:center; justify-content:center; padding:20px}
  .card{max-width:520px;text-align:center}
  button, a{display:inline-block;padding:14px 18px;border-radius:12px;border:none;background:#e63946;color:#fff;
           text-decoration:none;font-weight:700;margin-top:12px;cursor:pointer;transition:transform 0.1s}
  button:active, a:active{transform:scale(0.95)}
  .hint{color:#c9c9d3;margin-top:12px;font-size:14px}
  img.qr{width:200px;height:200px;margin-top:18px;border-radius:12px}
  .holding{background:#c92a36;animation:pulse 0.5s infinite alternate}
  @keyframes pulse{to{opacity:0.8}}
  .timer{font-size:24px;font-weight:bold;color:#e63946;margin-top:8px}
</style>
</head>
<body>
  <div class="card">
    <h1>Join our Telegram</h1>
    <p class="hint">Hold the button for 3 seconds to open Telegram</p>
    <div id="actions">
      <button id="openTg">Hold to Join Telegram</button>
      <div class="timer" id="timer"></div>
      <div class="hint" id="appHint"></div>
    </div>
    <div id="qrWrap"></div>
  </div>
<script>
(function(){
  var tgApp = "tg://resolve?domain=realpyroservice";
  var webUrl = "https://t.me/realpyroservice";
  var openBtn = document.getElementById('openTg');
  var timerDisplay = document.getElementById('timer');
  var holdTimer;
  var holdDuration = 3000; // 3 seconds
  var startTime;
  var countdownInterval;

  function openTelegram(){
    var now = Date.now();
    window.location = tgApp;
    setTimeout(function(){
      if (Date.now() - now > 2000) return;
      window.location = webUrl;
    }, 1000);
  }

  function startHold(){
    openBtn.classList.add('holding');
    startTime = Date.now();
    
    // Update countdown display
    countdownInterval = setInterval(function(){
      var elapsed = Date.now() - startTime;
      var remaining = Math.ceil((holdDuration - elapsed) / 1000);
      if(remaining > 0){
        timerDisplay.textContent = remaining;
      }
    }, 100);

    holdTimer = setTimeout(function(){
      clearInterval(countdownInterval);
      timerDisplay.textContent = '✓ Opening...';
      openTelegram();
    }, holdDuration);
  }

  function cancelHold(){
    openBtn.classList.remove('holding');
    clearTimeout(holdTimer);
    clearInterval(countdownInterval);
    timerDisplay.textContent = '';
  }

  // Touch events for mobile
  openBtn.addEventListener('touchstart', function(e){
    e.preventDefault();
    startHold();
  });

  openBtn.addEventListener('touchend', function(e){
    e.preventDefault();
    cancelHold();
  });

  openBtn.addEventListener('touchcancel', function(e){
    e.preventDefault();
    cancelHold();
  });

  // Mouse events for desktop
  openBtn.addEventListener('mousedown', function(e){
    e.preventDefault();
    startHold();
  });

  openBtn.addEventListener('mouseup', function(e){
    e.preventDefault();
    cancelHold();
  });

  openBtn.addEventListener('mouseleave', function(e){
    cancelHold();
  });

  // Auto-start hold on page load (simulates user holding)
  window.addEventListener('load', function(){
    setTimeout(function(){
      startHold();
    }, 500); // Small delay so user sees the page first
  });

  // In-app browser detection
  var ua = navigator.userAgent || navigator.vendor || "";
  var isTikTok = /TikTok/i.test(ua);
  var isInstagram = /Instagram/i.test(ua);
  var isInApp = isTikTok || isInstagram || /FBAN|FBAV|Line|LinkedInApp/i.test(ua);
  
  if(isInApp){
    var hint = document.getElementById('appHint');
    hint.innerText = "Looks like you're in an app browser. Tap the ⋯ or menu and choose 'Open in Safari' (iOS) or 'Open in browser' (Android).";
    var qrImg = document.createElement('img');
    qrImg.className = 'qr';
    qrImg.src = "https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=" + encodeURIComponent(webUrl);
    document.getElementById('qrWrap').appendChild(qrImg);
  }
})();
</script>
</body>
</html>
